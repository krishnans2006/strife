{% block script %}
<script>
  function processMessageKeydown(input) {
      if (event.key === 'Enter') {
          event.preventDefault();
          sendSocketMessage();
      }
  }

  function setUpAttachmentFunctionality() {
      const uploadButton = document.getElementById('upload-attachment');
      const fileStorage = document.getElementById('attachments');
      const fileDisplay = document.getElementById('attachments-view');

      uploadButton.addEventListener('click', () => {
          fileStorage.click();
      });
  }
</script>
{% endblock script %}

<div id="send-message" class="flex flex-row w-full p-4 pt-0">
  <div id="attachments-view"></div>
  <label class="basis-full flex flex-row bg-gray-800 rounded-xl items-center">
    <a id="upload-attachment" class="mx-3.5 size-7 flex-none aspect-square object-cover rounded-3xl bg-gray-700 text-white flex items-center justify-center cursor-pointer">
      <p class="text-2xl pb-0.5">+</p>
    </a>
    <input type="file" multiple id="attachments" class="hidden" />
    <input type="text" id="content" class="w-full px-4 pr-2 pl-0 bg-gray-800 rounded-r-xl text-white border-transparent focus:border-transparent focus:ring-0" placeholder="Message {{ channel.name }}" autocomplete="off" onkeydown="processMessageKeydown(this);">
  </label>
</div>
